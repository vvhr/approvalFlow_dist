{"version":3,"sources":["webpack:///./src/views/custom/test.vue?0ece","webpack:///src/views/custom/test.vue","webpack:///./src/views/custom/test.vue?29c4","webpack:///./src/views/custom/test.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","ref","attrs","formData","rules","tableRefs","staticStyle","on","submitForm","_v","resetForm","drawerTitle","drawerVisible","$event","_s","drawerText","staticRenderFns","components","props","data","field1Conf","field1","field2","field3","field3Action","field3fileList","computed","vmFormData","watch","created","window","_previewVm","mounted","methods","checkTableData","showExplain","field3BeforeUpload","component"],"mappings":"yHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,UAAU,CAACE,IAAI,SAASC,MAAM,CAAC,MAAQP,EAAIQ,SAAS,MAAQR,EAAIS,MAAM,KAAO,QAAQ,cAAc,UAAU,CAACL,EAAG,eAAe,CAACG,MAAM,CAAC,MAAQ,QAAQ,KAAO,WAAW,CAACH,EAAG,iBAAiB,CAACE,IAAI,SAASC,MAAM,CAAC,OAASP,EAAIU,UAAU,cAAc,GAAGN,EAAG,eAAe,CAACO,YAAY,CAAC,aAAa,UAAU,CAACP,EAAG,YAAY,CAACG,MAAM,CAAC,KAAO,WAAWK,GAAG,CAAC,MAAQZ,EAAIa,aAAa,CAACb,EAAIc,GAAG,QAAQV,EAAG,YAAY,CAACQ,GAAG,CAAC,MAAQZ,EAAIe,YAAY,CAACf,EAAIc,GAAG,SAAS,IAAI,GAAGV,EAAG,YAAY,CAACG,MAAM,CAAC,MAAQP,EAAIgB,YAAc,KAAK,QAAUhB,EAAIiB,eAAeL,GAAG,CAAC,iBAAiB,SAASM,GAAQlB,EAAIiB,cAAcC,KAAU,CAACd,EAAG,MAAM,CAACO,YAAY,CAAC,eAAe,SAAS,CAACX,EAAIc,GAAGd,EAAImB,GAAGnB,EAAIoB,kBAAkB,IACjyBC,EAAkB,GCkBtB,G,8BAAA,CAEEC,WAAY,GACZC,MAAO,GACPC,KAJF,WAKI,MAAO,CACLd,UAAW,CAAjB,muCACMO,eAAe,EACfD,YAAa,GACbI,WAAY,GACZZ,SAAU,CACRiB,WAAY,CAApB,0qCACAC,YAAA,EACAC,OAAA,KACAC,OAAA,IAEMnB,MAAO,CACL,OAAU,IAEZoB,aAAc,8CACdC,eAAgB,KAKpBC,SAAU,CAERC,WAFJ,WAGM,OAAO/B,KAAKO,WAGhByB,MAAO,GACPC,QAhCF,WAiCIC,OAAOC,WAAanC,MAGtBoC,QApCF,aAqCEC,QAAS,CACPzB,WADJ,WACA,WACA,4CACM,QAAN,mBACM,KAAN,sCACA,GACQ,QAAR,oBAIAE,UAVA,WAWM,KAAN,+BAEAwB,eAbA,WAaA,WACA,KAKM,OAJA,OAAN,0CACQ,IAAR,sBACQ,EAAR,wBAEA,GAEAC,YArBA,SAqBA,KACA,IACM,KAAN,cACM,KAAN,aACM,KAAN,mBAEAC,mBA3BA,SA2BA,GACA,0BAKA,OAJA,GACA,mCAGA,MCzF6V,I,YCOzVC,EAAY,eACd,EACA3C,EACAsB,GACA,EACA,KACA,KACA,MAIa,aAAAqB,E","file":"js/chunk-2d0d3697.44d32136.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-form',{ref:\"elForm\",attrs:{\"model\":_vm.formData,\"rules\":_vm.rules,\"size\":\"small\",\"label-width\":\"100px\"}},[_c('el-form-item',{attrs:{\"label\":\"表格/明细\",\"prop\":\"field1\"}},[_c('fc-input-table',{ref:\"field1\",attrs:{\"config\":_vm.tableRefs['field1']}})],1),_c('el-form-item',{staticStyle:{\"text-align\":\"right\"}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitForm}},[_vm._v(\"提交\")]),_c('el-button',{on:{\"click\":_vm.resetForm}},[_vm._v(\"重置\")])],1)],1),_c('el-drawer',{attrs:{\"title\":_vm.drawerTitle + '说明',\"visible\":_vm.drawerVisible},on:{\"update:visible\":function($event){_vm.drawerVisible=$event}}},[_c('pre',{staticStyle:{\"padding-left\":\"1rem\"}},[_vm._v(_vm._s(_vm.drawerText))])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n<div>\r\n  <el-form ref=\"elForm\" :model=\"formData\" :rules=\"rules\" size=\"small\"  label-width=\"100px\" >\r\n      <el-form-item  label=\"表格/明细\" prop=\"field1\"   >\r\n        <fc-input-table ref=\"field1\" :config=\"tableRefs['field1']\"></fc-input-table>\r\n      </el-form-item>\r\n      <el-form-item  style=\"text-align:right;\">\r\n          <el-button type=\"primary\" @click=\"submitForm\">提交</el-button>\r\n          <el-button @click=\"resetForm\">重置</el-button>\r\n        </el-form-item>\r\n    </el-form>\r\n  <el-drawer\r\n    :title=\"drawerTitle + '说明'\"\r\n    :visible.sync=\"drawerVisible\">\r\n    <pre style=\"padding-left: 1rem;\">{{drawerText}}</pre>\r\n  </el-drawer>\r\n</div>\r\n</template>\r\n<script>\r\nexport default {\r\n  \r\n  components: {},\r\n  props: [],\r\n  data () {\r\n    return {\r\n      tableRefs: {\"field1\":{\"cmpType\":\"common\",\"layout\":\"rowFormItem\",\"rowType\":\"table\",\"tagIcon\":\"row\",\"tag\":\"fc-input-table\",\"type\":\"default\",\"justify\":\"start\",\"align\":\"top\",\"label\":\"表格/明细\",\"layoutTree\":false,\"children\":[{\"cmpType\":\"common\",\"label\":\"日期范围\",\"tag\":\"fc-date-duration\",\"showDuration\":false,\"tagIcon\":\"date-range\",\"defaultValue\":null,\"span\":24,\"labelWidth\":0,\"style\":{\"width\":\"100%\"},\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"disabled\":false,\"clearable\":true,\"required\":false,\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"readonly\":false,\"regList\":[],\"changeTag\":true,\"proCondition\":true,\"asSummary\":false,\"formId\":2,\"renderKey\":1590564647136,\"layout\":\"colFormItem\",\"vModel\":\"field2\",\"isChild\":true,\"childIndex\":0},{\"cmpType\":\"common\",\"label\":\"附件\",\"tag\":\"el-upload\",\"tagIcon\":\"upload\",\"action\":\"https://jsonplaceholder.typicode.com/posts/\",\"defaultValue\":[],\"labelWidth\":0,\"disabled\":false,\"required\":false,\"accept\":\"\",\"name\":\"file\",\"auto-upload\":true,\"showTip\":false,\"buttonText\":\"点击上传附件\",\"fileSize\":20,\"sizeUnit\":\"MB\",\"list-type\":\"text\",\"multiple\":false,\"regList\":[],\"changeTag\":true,\"proCondition\":false,\"asSummary\":false,\"formId\":3,\"span\":24,\"renderKey\":1590564652172,\"layout\":\"colFormItem\",\"vModel\":\"field3\",\"isChild\":true,\"childIndex\":1}],\"actionText\":\"添加\",\"tableConf\":{},\"showDivider\":false,\"formId\":1,\"span\":24,\"renderKey\":1590564645807,\"vModel\":\"field1\",\"componentName\":\"row1\",\"gutter\":15}},\r\n      drawerVisible: false,\r\n      drawerTitle: '',\r\n      drawerText: '',\r\n      formData: {\r\n        field1Conf: {\"cmpType\":\"common\",\"layout\":\"rowFormItem\",\"rowType\":\"table\",\"tagIcon\":\"row\",\"tag\":\"fc-input-table\",\"type\":\"default\",\"justify\":\"start\",\"align\":\"top\",\"label\":\"表格/明细\",\"layoutTree\":false,\"children\":[{\"cmpType\":\"common\",\"label\":\"日期范围\",\"tag\":\"fc-date-duration\",\"showDuration\":false,\"tagIcon\":\"date-range\",\"defaultValue\":null,\"span\":24,\"labelWidth\":0,\"style\":{\"width\":\"100%\"},\"type\":\"daterange\",\"range-separator\":\"至\",\"start-placeholder\":\"开始日期\",\"end-placeholder\":\"结束日期\",\"disabled\":false,\"clearable\":true,\"required\":false,\"format\":\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",\"readonly\":false,\"regList\":[],\"changeTag\":true,\"proCondition\":true,\"asSummary\":false,\"formId\":2,\"renderKey\":1590564647136,\"layout\":\"colFormItem\",\"vModel\":\"field2\"},{\"cmpType\":\"common\",\"label\":\"附件\",\"tag\":\"el-upload\",\"tagIcon\":\"upload\",\"action\":\"https://jsonplaceholder.typicode.com/posts/\",\"defaultValue\":[],\"labelWidth\":0,\"disabled\":false,\"required\":false,\"accept\":\"\",\"name\":\"file\",\"auto-upload\":true,\"showTip\":false,\"buttonText\":\"点击上传附件\",\"fileSize\":20,\"sizeUnit\":\"MB\",\"list-type\":\"text\",\"multiple\":false,\"regList\":[],\"changeTag\":true,\"proCondition\":false,\"asSummary\":false,\"formId\":3,\"span\":24,\"renderKey\":1590564652172,\"layout\":\"colFormItem\",\"vModel\":\"field3\"}],\"actionText\":\"添加\",\"tableConf\":{},\"showDivider\":false,\"formId\":1,\"span\":24,\"renderKey\":1590564645807,\"vModel\":\"field1\",\"componentName\":\"row1\",\"gutter\":15},\r\nfield1: undefined,\r\nfield2: null,\r\nfield3: [],\r\n      },\r\n      rules: {\r\n        \"field2\": [],\r\n      },\r\n      field3Action: 'https://jsonplaceholder.typicode.com/posts/',\r\n      field3fileList: [],\r\n      \r\n      \r\n    }\r\n  },\r\n  computed: {\r\n    // 为了验证时能获取到表单数据\r\n    vmFormData(){\r\n      return this.formData\r\n    }\r\n  },\r\n  watch: {},\r\n  created () {\r\n    window._previewVm = this\r\n    \r\n  },\r\n  mounted () {},\r\n  methods: {\r\n    submitForm () {\r\n          if (!this.checkTableData()) console.log('false')\r\n          console.log(this.formData)\r\n          this.$refs['elForm'].validate(valid => {\r\n            if(!valid) return\r\n            console.log(this.formData)\r\n            // TODO 提交表单\r\n          })\r\n        },\r\nresetForm() {\r\n          this.$refs['elForm'].resetFields()\r\n        },\r\ncheckTableData () {\r\n          let valid = true\r\n          Object.keys(this.tableRefs).forEach(vModel => {\r\n            const res = this.$refs[vModel].submit()  // 返回false或表单数据\r\n            res ? (this.formData[vModel] = res) : (valid = false)\r\n          })\r\n          return valid\r\n        },\r\nshowExplain (explainText, title) {\r\n        if(!explainText) return\r\n        this.drawerTitle = title\r\n        this.drawerText = explainText\r\n        this.drawerVisible = true\r\n      },\r\nfield3BeforeUpload(file) {\r\n    let isRightSize = file.size / 1024 / 1024 < 20\r\n    if(!isRightSize){\r\n      this.$message.error('文件大小超过 20MB')\r\n    }\r\n    \r\n    return isRightSize\r\n  },\r\n  }\r\n}\r\n</script>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./test.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./test.vue?vue&type=template&id=10f41be6&\"\nimport script from \"./test.vue?vue&type=script&lang=js&\"\nexport * from \"./test.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}